process EcalDigitization = {

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
  # initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # geometry (Only Ecal+Hcal geometry)
  include "Geometry/CaloEventSetup/test/data/testCaloConfiguration.cfi"

  # Calo geometry service model
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

  source = PoolSource 
  { 
    untracked vstring fileNames = {"file:reco-application-ecal-simulation.root"}
    untracked int32 maxEvents = -1
  }

  # use trivial ESProducer 
  es_source = EcalTrivialConditionRetriever { }

  #Full digitization (EB+EE+ES)
  include "SimCalorimetry/EcalSimProducers/data/ecaldigi.cfi"

  #EB+EE ZS
  include "SimCalorimetry/EcalZeroSuppressionProducers/data/ecalGlobalZeroSuppression.cfi"

  #ES ZS
  include "SimCalorimetry/EcalZeroSuppressionProducers/data/esZeroSuppression.cfi"

  module out = PoolOutputModule 
  {
    untracked string fileName = "reco-application-ecal-digitization.root"
     untracked vstring outputCommands = 
     {  
        "keep *",
        "drop *_ecaldigi_*_*", 
        "drop ESDataFramesSorted_ecaldigi_*_*"
      }

  }
                                                 
  path p = 
  {
   ecaldigi, 
   ecalGlobalZeroSuppression, esZeroSuppression
  }

  endpath e = 
  {
    out
  }
}
