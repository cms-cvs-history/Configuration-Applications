process EcalLocalReco = {

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
  source = PoolSource 
  { 
    untracked vstring fileNames = {"file:reco-application-ecal-digitization.root"}
    untracked int32 maxEvents = -1
  }

  # use trivial ESProducer 
  es_source = EcalTrivialConditionRetriever { }

 #######################################################################################	
 # EB+EE uncalibrated RecHit producer 
 # Weight method (CMS standard requires tuned weights) 	

  module ecaluncalibrechit = EcalWeightUncalibRecHitProducer {
   string digiProducer   = "ecalGlobalZeroSuppression"
   string EBdigiCollection = ""
   string EEdigiCollection = ""
   string EBhitCollection  = "EcalUncalibRecHitsEB"
   string EEhitCollection  = "EcalUncalibRecHitsEE"
  }

  module ecalrechit = EcalRecHitProducer {
    string uncalibRecHitProducer   = "ecaluncalibrechit"
    string EBuncalibRecHitCollection = "EcalUncalibRecHitsEB"
    string EEuncalibRecHitCollection = "EcalUncalibRecHitsEE"
    string EBrechitCollection        = "EcalRecHitsEB"
    string EErechitCollection        = "EcalRecHitsEE"
  }


 #######################################################################################
 # ES RecHit producer (from Digis)
  module esrechit = ESRecHitProducer {
    string digiProducer   = "esZeroSuppression"
    string ESdigiCollection = ""
    string ESrechitCollection        = "EcalRecHitsES"
  }

 #######################################################################################


  module out = PoolOutputModule 
  {
    untracked string fileName = "reco-application-ecal-localreco.root"
  }
                                                 
  path p = 
  {
     ecaluncalibrechit, ecalrechit, 
     esrechit
  }

  endpath e = 
  {
    out
  }
}
